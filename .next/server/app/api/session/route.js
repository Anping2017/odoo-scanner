"use strict";(()=>{var e={};e.id=75,e.ids=[75],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6725:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>E,patchFetch:()=>R,requestAsyncStorage:()=>x,routeModule:()=>w,serverHooks:()=>A,staticGenerationAsyncStorage:()=>_});var o={};r.r(o),r.d(o,{GET:()=>$});var n=r(9303),s=r(8716),i=r(670),a=r(7070);let c=require("node:http");var p=r.n(c);let u=require("node:https");var l=r.n(u);process.env.ODOO_LOCATION_ID&&process.env.ODOO_LOCATION_ID;let d="1"===process.env.ALLOW_INSECURE_TLS,h=new(p()).Agent({keepAlive:!0}),O=new(l()).Agent({keepAlive:!0,rejectUnauthorized:!d}),m=(process.env.ODOO_ALLOWED_BASES||"").split(",").map(e=>e.trim()).filter(Boolean);async function f(e,t,r,o){let n=(o||"").replace(/\/+$/,"");if(!n||!function(e){try{let t=new URL(e);if(!/^https?:$/.test(t.protocol))return!1;return m.includes(`${t.protocol}//${t.host}`)}catch{return!1}}(n))throw Error("Invalid or missing Odoo base");let s=`${n}${e.startsWith("/")?"":"/"}${e}`,i={"Content-Type":"application/json"};r&&(i.Cookie=`session_id=${r}`);try{let e=await fetch(s,{method:"POST",headers:i,body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:"call",params:t}),cache:"no-store",agent:s.startsWith("https:")?O:h});if(!e.ok){let t=await e.text().catch(()=>"");throw Error(`HTTP ${e.status} ${e.statusText} when calling ${s} :: ${t.slice(0,300)}`)}let r=await e.json().catch(e=>{throw Error(`Invalid JSON from ${s}: ${String(e)}`)});if(r.error){let e=r.error?.data?.message||r.error?.message||"Odoo RPC error";throw Error(`${e} @ ${s}`)}return r.result}catch(e){throw Error(`Fetch to Odoo failed: ${e?.message||e}`)}}function g(e,t){let r=(e.headers.get("cookie")||"").match(RegExp(`${t}=([^;]+)`));return r?decodeURIComponent(r[1]):""}let v=(process.env.ODOO_ALLOWED_BASES||"").split(",").map(e=>e.trim()).filter(Boolean);async function $(e){try{let t=g(e,"odoo_session_id"),r=g(e,"odoo_base");if(!t||!r||!function(e){try{let t=new URL(e);return/^https?:$/.test(t.protocol)&&v.includes(`${t.protocol}//${t.host}`)}catch{return!1}}(r))return a.NextResponse.json({authenticated:!1});let o=await f("/web/session/get_session_info",{},t,r),n=o?.uid??o?.user_context?.uid??null;if(n)return a.NextResponse.json({authenticated:!0,uid:n});return a.NextResponse.json({authenticated:!1})}catch{return a.NextResponse.json({authenticated:!1})}}let w=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/session/route",pathname:"/api/session",filename:"route",bundlePath:"app/api/session/route"},resolvedPagePath:"C:\\working\\next.js\\odoo-inventory-scanner\\app\\api\\session\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:x,staticGenerationAsyncStorage:_,serverHooks:A}=w,E="/api/session/route";function R(){return(0,i.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:_})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,972],()=>r(6725));module.exports=o})();