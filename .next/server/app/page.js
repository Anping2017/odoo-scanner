(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2032:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d}),n(908),n(1506),n(5866);var r=n(3191),o=n(8716),i=n(7922),s=n.n(i),a=n(5231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);n.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,908)),"C:\\working\\next.js\\odoo-inventory-scanner\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,1506)),"C:\\working\\next.js\\odoo-inventory-scanner\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\working\\next.js\\odoo-inventory-scanner\\app\\page.tsx"],p="/page",u={require:n,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4213:()=>{},3003:(e,t,n)=>{Promise.resolve().then(n.bind(n,3701))},1507:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},3701:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(326),o=n(7577);let i=[{key:"moboplus.co.nz",label:"https://moboplus.co.nz",url:"https://moboplus.co.nz",db:"odoo"},{key:"repair.raytech.co.nz",label:"https://repair.raytech.co.nz",url:"https://repair.raytech.co.nz",db:"db-raytech-repair"}];function s({initialKey:e,onChange:t}){let[n,s]=(0,o.useState)(e||i[0].key);return(0,r.jsxs)("label",{style:{display:"block",marginBottom:10},children:[r.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"选择域名"}),r.jsx("select",{value:n,onChange:e=>s(e.target.value),style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:8,outline:"none"},children:i.map(e=>r.jsx("option",{value:e.key,children:e.label},e.key))})]})}function a({show:e=!1,required:t=!1,initialId:n,onChange:i}){let[s,a]=(0,o.useState)(n?String(n):""),[l,d]=(0,o.useState)(!1);return e?(0,r.jsxs)("fieldset",{style:{border:"1px solid #e5e7eb",padding:12,borderRadius:8,marginTop:12},children:[r.jsx("legend",{style:{padding:"0 6px"},children:"选择公司（moboplus.co.nz 必选）"}),[1,2,3,4].map(e=>(0,r.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",marginRight:16},children:[r.jsx("input",{type:"radio",name:"company",value:e,checked:s===String(e),onChange:e=>a(e.target.value),onBlur:()=>d(!0),style:{marginRight:6}}),e]},e)),t&&l&&!s?r.jsx("div",{style:{color:"#dc2626",marginTop:8,fontSize:12},children:"请先选择公司 ID"}):null]}):null}function l(){let[e,t]=(0,o.useState)(""),[n,i]=(0,o.useState)(""),[l,d]=(0,o.useState)(!0),[c,p]=(0,o.useState)(null),[u,h]=(0,o.useState)(void 0),[g,x]=(0,o.useState)(!1),[m,b]=(0,o.useState)(""),y=c?.key==="moboplus.co.nz",f=(0,o.useMemo)(()=>!!e&&!!n&&!!c&&(!y||!!u)&&!g,[e,n,c,y,u,g]);async function v(t){if(t.preventDefault(),b(""),f&&c){x(!0);try{let t=await fetch("/api/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:e,password:n,remember:l,companyId:y?u:void 0,baseUrl:c.url,dbName:c.db})}),r=await t.json().catch(()=>({}));if(!t.ok)throw Error(r?.error||"登录失败");window.location.href="/scan"}catch(e){b(e?.message||"登录失败")}finally{x(!1)}}}return r.jsx("div",{style:{minHeight:"100dvh",display:"grid",placeItems:"center",padding:20},children:(0,r.jsxs)("form",{onSubmit:v,style:{width:"100%",maxWidth:420,border:"1px solid #e5e7eb",borderRadius:12,padding:20,boxShadow:"0 2px 8px rgba(0,0,0,0.06)",background:"#fff"},children:[r.jsx("h1",{style:{fontSize:20,marginBottom:16},children:"登录 Odoo"}),r.jsx(s,{onChange:p}),(0,r.jsxs)("label",{style:{display:"block",marginBottom:10},children:[r.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"账号"}),r.jsx("input",{value:e,onChange:e=>t(e.target.value),required:!0,autoComplete:"username",placeholder:"登录邮箱/账号",style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:8,outline:"none"}})]}),(0,r.jsxs)("label",{style:{display:"block",marginBottom:10},children:[r.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"密码"}),r.jsx("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0,autoComplete:"current-password",placeholder:"密码",style:{width:"100%",padding:"10px 12px",border:"1px solid #e5e7eb",borderRadius:8,outline:"none"}})]}),r.jsx(a,{show:y,required:y,onChange:h}),(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",marginTop:12},children:[r.jsx("input",{type:"checkbox",checked:l,onChange:e=>d(e.target.checked),style:{marginRight:8}}),"保持登录 30 天"]}),m?r.jsx("div",{style:{color:"#dc2626",marginTop:12,fontSize:13},children:m}):null,r.jsx("button",{type:"submit",disabled:!f,style:{marginTop:16,width:"100%",padding:"12px 14px",borderRadius:10,border:"none",background:f?"#111827":"#9ca3af",color:"#fff",cursor:f?"pointer":"not-allowed",fontWeight:600,letterSpacing:.3},children:g?"登录中…":"登录"})]})})}},1506:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i,metadata:()=>o});var r=n(9510);n(7272);let o={title:"Odoo Inventory Scanner",description:"Mobile-friendly barcode scanning for Odoo 17 stock counts"};function i({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx("div",{className:"container",children:e})})})}},908:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(8570).createProxy)(String.raw`C:\working\next.js\odoo-inventory-scanner\app\page.tsx#default`)},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[276,471],()=>n(2032));module.exports=r})();